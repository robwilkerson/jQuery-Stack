/**
 * Stack Plugin for jQuery
 * (c) 2012 Rob Wilkerson. Free software released under MIT License.
 */// Attach Stack as a jQuery plugin
jQuery.fn.stack=function(e){return this.each(function(){jQuery.stack.init(this,e)}),this},jQuery.stack=function(){var e=this;return this.opts={},this.init=function(t,n){function s(){return $(i.rowSelector,r).first().clone(!0)}function o(){var e=$(i.rowSelector,r);i.removeSelector&&$(i.removeSelector.length)&&(e.length===1?$(i.removeSelector,r).hide():$(i.removeSelector,r).show())}var r=jQuery(t),i=jQuery.extend({rowElement:"fieldset",rowClass:"jqstackrow",addSelector:null,removeSelector:null,maxRows:null,beforeAdd:null,afterAdd:null,beforeRemove:null,afterRemove:null},e.opts,n);i.rowSelector=i.rowElement+"."+i.rowClass,r.find(i.rowSelector).length||r.children().wrapAll("<"+i.rowElement+' class="'+i.rowClass+'" />'),r.on("click",i.addSelector,function(e){e.preventDefault();var t=$(this),n=s();typeof i.beforeAdd=="function"&&i.beforeAdd(n),r.append(n),o(),typeof i.afterAdd=="function"&&i.afterAdd(n)}),i.removeSelector&&$(i.removeSelector.length)&&r.on("click",i.removeSelector,function(e){e.preventDefault();var t=$(this),n=t.closest(i.rowSelector);typeof i.beforeRemove=="function"&&i.beforeRemove(n),n.remove(),o(),typeof i.afterRemove=="function"&&i.afterRemove(r)}),o()},this}();